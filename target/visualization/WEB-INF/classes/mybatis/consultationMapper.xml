<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cs.dao.mapper.ConsultationMapper">
    <resultMap type="com.cs.dao.model.ConsultationPO" id="consultation">
        <result column="id" property="id" jdbcType="INTEGER"/>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="mail" property="mail" jdbcType="VARCHAR"/>
        <result column="phone" property="phone" jdbcType="VARCHAR"/>
        <result column="company" property="company" jdbcType="VARCHAR"/>
        <result column="job" property="job" jdbcType="VARCHAR"/>
        <result column="title" property="title" jdbcType="VARCHAR"/>
        <result column="content" property="content" jdbcType="VARCHAR"/>
        <result column="handle" property="handle" jdbcType="INTEGER"/>
        <result column="type" property="type" jdbcType="INTEGER"/>
        <result column="date" property="date" jdbcType="VARCHAR"/>
    </resultMap>
    <insert id="insertConsultation" parameterType="com.cs.dao.model.ConsultationPO">
        INSERT INTO
        	CONSULTATION(name,mail,phone,company,job,title,content,handle,type,date)
        VALUES(#{name},#{mail},#{phone},#{company},#{job},#{title},#{content},#{handle},#{type},#{date})
    </insert>
    <delete id="delConsultation">
        DELETE FROM
        	CONSULTATION
       WHERE id = #{id}
    </delete>
    <select id="searchConsultation" parameterType="HashMap" resultMap="consultation">
        SELECT id,company,job,phone,title,date,handle
        	FROM CONSULTATION
        <where>
            <if test="type!=null">type = #{type}</if>
            <if test="handle!=null">and handle = #{handle} </if>
            <if test="biz!=null and biz!=''">and (company like #{biz} or job like #{biz})</if>
            <if test="other!=null and other!=''">and title like #{other}</if>
        </where>
        ORDER BY id DESC
        	LIMIT #{offset},#{limit}
    </select>
    <select id="getConsultation" parameterType="int" resultMap="consultation">
        SELECT *
        	FROM CONSULTATION
        WHERE id = #{id}
    </select>
    <update id="setHandle" parameterType="int">
        UPDATE CONSULTATION
        	SET handle = 1
        WHERE id = #{id}
    </update>
</mapper>